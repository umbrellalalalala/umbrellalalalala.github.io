<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="C," />










<meta name="description" content="指针指针基本概念1、指针变量使用示例： 1234567int *p1, *p2;int a = 1;int b = 2;p1 = &amp;amp;a;p2 = &amp;amp;b;printf(&quot;p1:&quot;, * p1);printf(&quot;p2:&quot;, * p2); 以上是指针变量的定义和指针指向内容的引用。 指针变量用作函数参数： 123456void swap(int * p1, int * p2)&amp;#123;">
<meta name="keywords" content="C">
<meta property="og:type" content="article">
<meta property="og:title" content="C语言——基础查漏补缺（一.2）">
<meta property="og:url" content="https://yoursite.com/2019/02/15/C语言——基础查漏补缺（一.2）/index.html">
<meta property="og:site_name" content="Umbrellalalalala&#39;s blog">
<meta property="og:description" content="指针指针基本概念1、指针变量使用示例： 1234567int *p1, *p2;int a = 1;int b = 2;p1 = &amp;amp;a;p2 = &amp;amp;b;printf(&quot;p1:&quot;, * p1);printf(&quot;p2:&quot;, * p2); 以上是指针变量的定义和指针指向内容的引用。 指针变量用作函数参数： 123456void swap(int * p1, int * p2)&amp;#123;">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-03-24T06:48:41.406Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="C语言——基础查漏补缺（一.2）">
<meta name="twitter:description" content="指针指针基本概念1、指针变量使用示例： 1234567int *p1, *p2;int a = 1;int b = 2;p1 = &amp;amp;a;p2 = &amp;amp;b;printf(&quot;p1:&quot;, * p1);printf(&quot;p2:&quot;, * p2); 以上是指针变量的定义和指针指向内容的引用。 指针变量用作函数参数： 123456void swap(int * p1, int * p2)&amp;#123;">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://yoursite.com/2019/02/15/C语言——基础查漏补缺（一.2）/"/>





  <title>C语言——基础查漏补缺（一.2） | Umbrellalalalala's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Umbrellalalalala's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Enjoy the symphony of the storm.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yoursite.com/2019/02/15/C语言——基础查漏补缺（一.2）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Umbrellalalalala">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Umbrellalalalala's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">C语言——基础查漏补缺（一.2）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-15T19:29:29+08:00">
                2019-02-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programming-languages/" itemprop="url" rel="index">
                    <span itemprop="name">programming languages</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h1><h2 id="指针基本概念"><a href="#指针基本概念" class="headerlink" title="指针基本概念"></a>指针基本概念</h2><p>1、指针变量<br>使用示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p1, *p2;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line">p1 = &amp;a;</span><br><span class="line">p2 = &amp;b;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"p1:"</span>, * p1);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"p2:"</span>, * p2);</span><br></pre></td></tr></table></figure>
<p>以上是指针变量的定义和指针指向内容的引用。</p>
<p>指针变量用作函数参数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> * p1, <span class="keyword">int</span> * p2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> temp;</span><br><span class="line">	temp = * p1;</span><br><span class="line">	* p1 = * p2;</span><br><span class="line">	* p2 = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码实现指针指向的两个存储单元内容互换，但写成以下这样就有问题了：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> * p1, <span class="keyword">int</span> * p2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> * temp;</span><br><span class="line">	* temp = * p1;</span><br><span class="line">	* p1 = * p2;</span><br><span class="line">	* p2 = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>⚠️由于未给temp赋值，因此temp无确定的值，所以temp指向的单元是未知的，此时对* temp赋值，就相当于改变未知单元的值，万一改变的是重要单元，那么可能会破坏系统正常工作状况。</p>
<p>如果执行以下语句，则互换作用无法达成：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> temp;</span><br><span class="line">	temp = x;</span><br><span class="line">	x = y;</span><br><span class="line">	y = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>x和y作为形参，两者互换，但不会影响到实参互换。</p>
<p>⚠️C语言中实参变量和形参变量之间的数据传递是<strong>单向传递</strong>，所以即便是通过指针的方式实现自定义swap函数的功能，也是<strong>将指针指向的存储空间中的量进行改变，而不是将指针本身的值（指针指向存储空间的地址）进行改变</strong>。</p>
<p>⚠️设有<code>int * p</code>定义的整型指针变量p，则形如<code>p = xxx</code>是改变指针变量的值，即指针变量指向的地址；形如<code>* p = xxx</code>是改变指针指向的地址中的内容，而指针的指向不变。</p>
<hr>
<p>看一个重要概念：（此处大量参考百度知道用户CodeBlove的内容，详情见<a href="https://zhidao.baidu.com/question/918644091176663379.html" target="_blank" rel="noopener">参考链接</a>）<br>⚠️⚠️⚠️<strong>二维数组和指针的指针间的关系</strong><br>二维数组名即数组地址，指向首行地址，不是指针的指针。</p>
<p>设有二维数组<code>int a[10][10]</code>，假设a等价于指针的指针，则设<code>int **p=a</code>; 那么要对行递增执行p++时，由于int <em>*是指指向一个 int </em>类型的指针，其数据宽度是4字节，内置宽度，因此p将指向下一个整数元素地址，也就是p递增了4字节，而不是10个int型数据的宽度，这就错位了。</p>
<p>所以a[10][10]的地址类型不是简单的指针的指针，应该是<code>int (*)[10]</code>,而不是int **。</p>
<p>设<code>int (*p)[10]=a</code>,其含义为，p是一个<strong>指向含10个int类型元素的一维数组或行的指针</strong>。</p>
<hr>
<h2 id="指针和数组"><a href="#指针和数组" class="headerlink" title="指针和数组"></a>指针和数组</h2><p>2、通过指针引用数组<br>指针存储地址，而数组名就是数组首元素的地址。<br>示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">10</span>];</span><br><span class="line">……	<span class="comment">//对a赋值</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>, *(a+i));	<span class="comment">//但注意每次都要重新计算地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码可以依次输出数组的十个元素，a代表数组首元素地址，a+i代表第(i+1)个元素的地址，当进行a+i操作的时候，系统会自动根据a的基类型将i转换为相应的数字，比如此处a的基类型是int，则使用VC++ 6.0的系统自动将+i转换为+4。</p>
<p>*(a+i)引用数组元素的方法叫指针法，a[i]引用数组元素的方法叫下标法；</p>
<p>⚠️以上代码算不上真正的通过指针引用数组元素，在使用a[i]时，C编译器会将a[i]转化为<em>(a+i)，再计算元素地址，即使用a[i]和</em>(a+i)效率是相同的。</p>
<p>以下是利用指针的方式来输出数组中的全部元素：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(p=a; p&lt;(a+<span class="number">10</span>);p++)&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>, * p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用指针变量直接指向元素，不必每次都重新计算地址，将指针在变量上进行移动（p++）也是较为迅速的操作。</p>
<p>调用自定义函数，传递参数的时候，系统是将形参数组名当作指针变量来处理的，以下两种写法是等价的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">func(<span class="keyword">int</span> a[], <span class="keyword">int</span> n);</span><br><span class="line">func(<span class="keyword">int</span> * a, <span class="keyword">int</span> n);</span><br></pre></td></tr></table></figure>
<p>3、通过指针引用<strong>多维</strong>数组<br>设有二维数组a[3][4]，则：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:center">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a</td>
<td style="text-align:center">指向第0行，即第0行首地址</td>
</tr>
<tr>
<td style="text-align:center">a+i</td>
<td style="text-align:center">指向第i行，即第i行首地址</td>
</tr>
<tr>
<td style="text-align:center">a[0]，<em>(a+0)，</em>a</td>
<td style="text-align:center">指向第0行第0个元素</td>
</tr>
<tr>
<td style="text-align:center">a[1]+2，*(a +1)+2，&amp;a[1][2]</td>
<td style="text-align:center">指向第1行第2个元素</td>
</tr>
<tr>
<td style="text-align:center">*(a[1]+2)，a[1][2]</td>
<td style="text-align:center">a[1][2]</td>
</tr>
<tr>
<td style="text-align:center"><em> (</em>(a+1)+2)</td>
<td style="text-align:center">a[1][2]</td>
</tr>
</tbody>
</table>
</div>
<p>理解上表，只需将二维数组想象成多行组成，每一行是一个一维数组。<br>⚠️&amp;a[i]或a+i指向行，a[i]或*(a+i)指向列</p>
<h5 id="指向二维数组的指针变量的两种方式："><a href="#指向二维数组的指针变量的两种方式：" class="headerlink" title="指向二维数组的指针变量的两种方式："></a>指向二维数组的指针变量的两种方式：</h5><p>（1）使用int *型指针变量：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123;……&#125;</span><br><span class="line"><span class="keyword">int</span> * p;</span><br><span class="line"><span class="keyword">for</span>(p=a[<span class="number">10</span>]; p&lt;a[<span class="number">0</span>]+<span class="number">12</span>; p++)&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%4d"</span>, * p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（2）使用int(*)[4]型指针变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123;……&#125;</span><br><span class="line"><span class="keyword">int</span> (* p)[<span class="number">4</span>]</span><br><span class="line">p = a;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>, * (*(p+i)+j));</span><br></pre></td></tr></table></figure>
<p>（这种写法真是要多麻烦有多麻烦，反正博主是从来不用的）</p>
<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><p>引用数组元素的三种方式中，a[i]和*(a+i)的方式效率一样，都比较费时，因为每次都要重新计算地址，定义一个指针变量指向数组元素，通过指针变量自加操作遍历数组元素则较为高效；</p>
<p>⚠️要区分数组名a和指针p的区别，后者是指针变量，但前者<strong>a是指针常量</strong>，所以a++操作是行不通的。</p>
<h2 id="指针和字符串"><a href="#指针和字符串" class="headerlink" title="指针和字符串"></a>指针和字符串</h2><p>4、通过指针引用字符串<br>首先区别以下两种方式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line"><span class="keyword">char</span> * <span class="built_in">string</span>;</span><br><span class="line"><span class="built_in">string</span> = <span class="string">"deep dark fantasy"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式二</span></span><br><span class="line"><span class="keyword">char</span> * <span class="built_in">string</span>;</span><br><span class="line">*<span class="built_in">string</span> = <span class="string">"deep dark fantasy"</span>;</span><br></pre></td></tr></table></figure>
<p>不要认为以上两种方式是等价的，前者是将字符串的首地址赋给指针变量string，后者是将指针变量指向的地址的内容变成那个字符串；</p>
<p>再来看看字符串的输出方式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"%s\n"</span>, <span class="built_in">string</span>);</span><br></pre></td></tr></table></figure>
<p>%s是输出字符串时所用的格式符，再输出项中给出字符指针变量名string，则系统会输出string指向的字符串的第一个字符，然后自动使string加1，使之指向下一个字符，再输出该字符……直到遇到\0为止。用字符数组名或字符指针变量名都可以输出一个字符串，但是<strong>对于数值型数组，不能企图用数组名输出它的全部元素</strong>。</p>
<p>⚠️”deep dark fantasy”是字符串常量，C语言对字符串常量是按照字符数组处理的，在内存中开辟了一个字符数组来存放该字符串常量，但这个字符数组是没有名字的，因此不能通过数组名来引用，只能通过指针变量来引用。</p>
<p>5、<strong>字符指针变量和字符数组名的比较</strong><br>首先，调用函数时，函数的形参和实参都可以是字符数组名或字符指针变量中的一种。</p>
<p>接下来，讲讲两者在其他方面的使用异同：<br>字符数组名和字符指针变量保存的都是字符串第一个字符的地址，但是只能对后者赋值操作：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> * a;</span><br><span class="line">a = <span class="string">"I am umbrellalalalala"</span>;</span><br></pre></td></tr></table></figure></p>
<p>这样是没问题的，但下面的方法是错的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> str[<span class="number">14</span>];</span><br><span class="line">str = <span class="string">"I am umbrellalalalala"</span>;	<span class="comment">//数组名是地址，是常量，不能被赋值</span></span><br><span class="line">str[] = <span class="string">"I am umbrellalalalala"</span>;	<span class="comment">//这样赋值也是非法的</span></span><br><span class="line"><span class="comment">//如果是对单个数组元素赋值则没问题：str[0] = "I"</span></span><br></pre></td></tr></table></figure>
<p>⚠️定义了字符指针变量（或者其他指针变量）的时候，应当立刻给它赋值，否则它将指向一个未知的地址，如果给那个地址输入数据，同时那个地址碰巧是系统区之类的地方，则会出问题：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> * a;	<span class="comment">//定义字符指针变量a，此时a指向的地址未知</span></span><br><span class="line"><span class="comment">//下面这个语句改变的不是a的指向，而是a指向的地址的内容！</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, a);	<span class="comment">//键盘输入一个字符串，字符串被存储到a指向的内存单元开始的一段连续内存单元中，</span></span><br><span class="line">							<span class="comment">//VC++ 6.0编译这种语句时会给出警告</span></span><br></pre></td></tr></table></figure>
<p>所以应当在定义了指针变量后，及时指定其指向。</p>
<p>看一个有趣的字符指针变量用法开开眼界：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">666</span>;</span><br><span class="line"><span class="keyword">char</span> * format;</span><br><span class="line">format = <span class="string">"%d\n"</span>;</span><br><span class="line"><span class="built_in">printf</span>(format, x);	<span class="comment">//输出666，换行</span></span><br></pre></td></tr></table></figure>
<h2 id="指针和函数"><a href="#指针和函数" class="headerlink" title="指针和函数"></a>指针和函数</h2><p>接下来总结博主从来没用过的函数指针。</p>
<p>6、函数指针定义和基本使用：<br>如果在程序中定义了一个函数，在编译时，编译系统为函数代码分配一段存储空间，这段存储空间的起始地址（又称入口地址）就是这个函数的指针。</p>
<p>使用指针变量访问用户自定义的函数：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span>;	<span class="comment">//用户自定义函数的声明</span></span><br><span class="line">	<span class="keyword">int</span> (*p)(<span class="keyword">int</span>, <span class="keyword">int</span>);	<span class="comment">//定义指向函数的指针变量p</span></span><br><span class="line">	p = max;			<span class="comment">//指针指向函数（将函数名“赋给”指针变量）</span></span><br><span class="line">	……</span><br><span class="line">	<span class="comment">//接下来使用自定义函数</span></span><br><span class="line">	c = (*p)(a, b);</span><br><span class="line">	……</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span>	<span class="comment">//max函数的定义，略</span></span></span><br><span class="line">……</span><br></pre></td></tr></table></figure>
<p>注意<code>(*p)</code>代表max函数，括号不能省略，因为<em>要和p先结合。如果写成了`int </em> p(int, int)<code>，这个是范围整型指针的p函数。
要先将函数入口地址赋给指针，才能用指针使用函数，注意地址赋值操作不能写成：</code>p = max(a, b)`<br>这样就变成了将函数所得到的函数值赋给p。</p>
<p>7、用指向函数的指针作函数参数<br>直接看用法：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">void func(int (* x1)(int), int (* x2)(int, int))&#123;</span><br><span class="line">	……</span><br><span class="line">	a = (* x1)(<span class="number">1</span>);</span><br><span class="line">	b = (* x2)(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">	……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果func经常需要调用不同的函数，也就是说func的参数经常要改变，那么这种情况下的函数指针的使用就非常方便了，只需要每次调用func时给出不同的函数名作为实参就行了。</p>
<h2 id="指针数组和多重指针"><a href="#指针数组和多重指针" class="headerlink" title="指针数组和多重指针"></a>指针数组和多重指针</h2><p>8、区分指针数组和“数组指针”<br>下面定义一个指针数组：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p[<span class="number">4</span>];</span><br></pre></td></tr></table></figure>
<p>下面定义一个指向一维数组的指针变量：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> (* p)[<span class="number">4</span>];</span><br></pre></td></tr></table></figure>
<p>9、指向指针的指针<br>简单看一个例子：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> *name[] = &#123;<span class="string">"deep"</span>, <span class="string">"dark"</span>, <span class="string">"fantasy"</span>&#125;;	<span class="comment">//定义一个指针数组，每个数组元素指向一个字符串</span></span><br><span class="line">	<span class="keyword">char</span> **p;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)&#123;</span><br><span class="line">		p = name + i;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s\n"</span>, *p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deep</span><br><span class="line">dark</span><br><span class="line">fantasy</span><br></pre></td></tr></table></figure>
<p>完♂美</p>
<p>依次类推，还可以定义<code>int ***</code>型，<code>int ****</code>型指针，但不常见也没必要。</p>
<p>10、动态分配内存<br>这里谭浩强的书上介绍了calloc、realloc、malloc、free函数，这里只介绍malloc和free，例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">int *p, i, n;</span><br><span class="line">scanf(&quot;%d&quot;, &amp;n);	//可以在运行时指定数组大小</span><br><span class="line">p = (int *)malloc(n * sizeof(int));</span><br><span class="line">for(i=0; i&lt;n; i++)&#123;</span><br><span class="line">	scanf(&quot;%d&quot;, p+i);</span><br><span class="line">&#125;</span><br><span class="line">……</span><br><span class="line">free(p);	//使用完这个数组，将其指向的动态分配的空间释放</span><br></pre></td></tr></table></figure>
<p>这个代码段实现程序运行时再指定数组大小，并向数组中输入元素，使用完释放动态分配的空间。</p>
<p>11、void指针类型</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> * p;</span><br><span class="line">p = &amp;a;	<span class="comment">//相当于执行p = (void *)&amp;a</span></span><br></pre></td></tr></table></figure>
<p>执行后p得到a的<strong>纯地址</strong>，但<strong>不指向a</strong>，不能通过*p输出a的值。</p>
<p>12、指针的其他概念<br>（1）指针和指针变量<br>指针就是地址本身，指针变量是存储地址的变量。</p>
<p>（2）重点区分<code>int (* p)[4]</code>和<code>int * p[4]</code>：<br>前者是指向包含四个元素的一维数组的指针变量；后者是指针数组，包含四个指向整型数据的指针元素。</p>
<h1 id="用户自建数据类型"><a href="#用户自建数据类型" class="headerlink" title="用户自建数据类型"></a>用户自建数据类型</h1><h2 id="结构体及其使用"><a href="#结构体及其使用" class="headerlink" title="结构体及其使用"></a>结构体及其使用</h2><p>1、结构体定义和基本使用</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Date</span>	//定义一个叫<span class="title">Date</span>的结构体</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> month;</span><br><span class="line">	<span class="keyword">int</span> day;</span><br><span class="line">	<span class="keyword">int</span> year;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> num;</span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">	<span class="keyword">char</span> sex;</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Date</span> <span class="title">birthday</span>;</span>	<span class="comment">//结构体可以“嵌套使用”，定一个 Date型的结构体变量名曰birthday，</span></span><br><span class="line">							<span class="comment">//作为Student结构体的成员</span></span><br><span class="line">	<span class="keyword">char</span> addr[<span class="number">30</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">student1</span>, <span class="title">student2</span>;</span>	<span class="comment">//利用定义好的结构体定义两个结构体变量</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Philosophy</span>&#123;</span>	<span class="comment">//定义结构体的同时定义结构体变量，可同时给结构体变量初始化，也可以不初始化</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">	<span class="keyword">char</span> addr[<span class="number">20</span>];</span><br><span class="line">	<span class="keyword">char</span> profession[<span class="number">20</span>];</span><br><span class="line">&#125; Van = &#123;<span class="string">"Van"</span>, <span class="string">"next door"</span>, <span class="string">"artist"</span>&#125;, Billy;		<span class="comment">//注意分号的位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用以上定义的结构体变量</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%s\n%s\n%s\n"</span>, Van.name, Van.addr, Van.profession&#125;;</span><br></pre></td></tr></table></figure>
<p>C99标准允许对结构体变量的某一个成员进行初始化：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个Student结构体变量b，只指定b的name</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">b</span> = &#123;</span>.name = <span class="string">"xiaoming"</span>&#125;;	<span class="comment">//name之前有成员运算符“.”</span></span><br></pre></td></tr></table></figure>
<p>如果未进行初始化，那么数值型成员会被系统初始化为0，字符型成员会被系统初始化为’\0’，指针型成员会被初始化为NULL。</p>
<p>注意以下操作，由于<code>.</code>运算符优先级最高，所以：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.age++</span><br></pre></td></tr></table></figure>
<p>是对b的成员age进行自加操作。</p>
<p>同类的结构体变量可以互相赋值：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">c</span>, <span class="title">d</span>;</span></span><br><span class="line">d = &#123;……&#125;;	<span class="comment">//初始化内容略</span></span><br><span class="line">c = d;	<span class="comment">//这样c的成员值和d的一样</span></span><br></pre></td></tr></table></figure>
<p>2、结构体数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>&#123;</span></span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">20</span>];</span><br><span class="line">	<span class="keyword">int</span> count;</span><br><span class="line">&#125;leader[<span class="number">3</span>] = &#123;<span class="string">"Li"</span>, <span class="number">0</span>, <span class="string">"Zhang"</span>, <span class="number">0</span>, <span class="string">"Sun"</span>, <span class="number">0</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>结构体数组名为leader，大小为3，上述初始化方式直接在大括号中方6个值，每个结构体变量有两个成员，这种方式恰能按序给三个数组元素赋值。</p>
<p>3、结构体指针<br>指向一个结构体变量的指针：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">e</span>;</span>	<span class="comment">//继续使用1中定义的结构体变量</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> *<span class="title">p</span>;</span></span><br><span class="line">p = &amp;e;</span><br></pre></td></tr></table></figure></p>
<p>这样操作后，<code>e.name</code>和<code>(*p).name</code>以及<code>p-&gt;name</code>（常用）是一样的。</p>
<p>指向结构体数组的指针：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">stu</span>[3] = &#123;</span>&#123;stu[<span class="number">1</span>]的成员值&#125;, &#123;stu[<span class="number">2</span>]的成员值&#125;, &#123;stu[<span class="number">3</span>]的成员值&#125;&#125;;</span><br><span class="line"><span class="keyword">for</span>(struct Student * p = stu; p&lt;stu+<span class="number">3</span>; p++)</span><br><span class="line">	<span class="built_in">printf</span> (p当前指向的结构体变量);</span><br></pre></td></tr></table></figure>
<p>上述伪代码，p在循环中，依次指向结构体变量stu[1]、stu[2]、stu[3]。</p>
<p>还可以用结构体变量和结构体变量指针做函数参数，此处略。</p>
<h2 id="从来没用过的共用体"><a href="#从来没用过的共用体" class="headerlink" title="从来没用过的共用体"></a>从来没用过的共用体</h2><p>说实话，这部分内容过去也就在各种考试前看过，实际使用频率为0……但既然都写了这么多了，姑且就将这部分内容总结下：</p>
<p>4、共用体的三种声明和定义的形式：<br>（1）声明共用体的同时定义变量：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> Data&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">float</span> f;</span><br><span class="line">&#125;a, b, c;</span><br></pre></td></tr></table></figure></p>
<p>（2）先声明共用体，再定义变量：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> Data&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">float</span> f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">union</span> Data a, b, c;</span><br></pre></td></tr></table></figure></p>
<p>(3)声明共用体的同时定义变量，但不说明共用体的名称：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">float</span> f;</span><br><span class="line">&#125;a, b, c</span><br></pre></td></tr></table></figure></p>
<p>5、共用体和结构体的区别：<br>结构体变量所占内存长度是各成员占的内存长度只和，每个成员分别占有其自己的内存单元。而共用体变量所占内存长度等于最长的成员的长度。</p>
<p>也就是说，共用体变量对应的同一个内存段可以用来存放几种不同类型的成员，但在每一瞬时只能存放其中一个成员。因为在每一个瞬时，存储单元只能有唯一的内容。例子：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> Data&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">float</span> f;</span><br><span class="line">&#125;a;</span><br><span class="line">a.i = <span class="number">97</span>;</span><br></pre></td></tr></table></figure>
<p>表示将整数97存到共用体变量中，显然此时a中只有i有用户想要的值，但也不是不可以强行输出所有成员：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意97在内存中是01100001</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>, a.i);	<span class="comment">//输出的是97</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%c"</span>, a.ch);	<span class="comment">//输出的是字母'a'，因为'a'的ASCII码是97</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%f"</span>, a.f);	<span class="comment">//输出0.000000</span></span><br></pre></td></tr></table></figure>
<p>按照浮点数形式输出为0的解释：<br>浮点数占32位，1位符号位+8位指数位+23位尾数位：<br><code>00000000，00000000，00000000，01100001</code>对于float型而言，指数位全是0，而实际上计算出来的指数要加127再作为指数位进行存储 。</p>
<hr>
<p>补充内容：<br>float型的2.0的存储方式，2.0写作二进制的科学计数法为：</p>
<script type="math/tex; mode=display">1.0\times2^1</script><p>符号位为0（正），指数位为$127+1=128=(10000000)_2$，尾数位是0（只取1.0的小数部位）<br>所以在内存中，以32位float型存储为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0,10000000,00000000000000000000000	//1符号、8指数、23尾数</span><br></pre></td></tr></table></figure>
<hr>
<p>所以说，int型的97在内存中的二进制序列，以float型的眼光看待，就是0（个人认为理由是指数位全零是非法的，或者指数位全零是特指float型的0）。</p>
<p>判断对错：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> Data&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">float</span> f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span> Data a = &#123;<span class="number">1</span>, <span class="string">'a'</span>, <span class="number">1.5</span>&#125;;		<span class="comment">//错误，不能初始化多个成员，它们占用同一段存储单元</span></span><br><span class="line"><span class="keyword">union</span> Data a = &#123;<span class="number">15</span>&#125;;	<span class="comment">//正确，对第一个成员初始化</span></span><br><span class="line"><span class="keyword">union</span> Data a = &#123;.ch=<span class="string">'j'</span>&#125;	<span class="comment">//正确，C99允许用这种方式对特定的成员初始化</span></span><br></pre></td></tr></table></figure>
<p>⚠️共用体变量中起作用的成员是最后一次被赋值的成员。</p>
<p>C99允许同类型的共用体变量相互赋值：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b = a;	<span class="comment">//a和b都是同类型的共用体，合法</span></span><br></pre></td></tr></table></figure>
<p>但是不允许对共用体变量赋值，也不可以企图引用共用体变量名以得到一个值赋给非共用体变量。</p>
<h2 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h2><p>使用频率类似于switch语句，简单总结如下：<br>6、枚举类型介绍，直接看代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Weekday&#123;sun, mon, tue, wed, thu, fri, sat&#125;;   <span class="comment">//enum用来声明枚举类型，大括号中的称为枚举元素</span></span><br><span class="line"><span class="keyword">enum</span> Weekday workday;	<span class="comment">//声明枚举变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//辨别正误：</span></span><br><span class="line">workday = mon;	<span class="comment">//正确，mon是指定的枚举常量之一</span></span><br><span class="line">workday = monday;		<span class="comment">//错误，monday不是指定的枚举常量之一</span></span><br><span class="line">mon = <span class="number">1</span>;		<span class="comment">//错误，不能以这种形式对枚举元素赋值</span></span><br></pre></td></tr></table></figure>
<p>枚举元素的引用和赋值：<strong>每一个枚举元素都代表一个整数</strong>，比如上面定义的Weekday中，sun为0，mon为1……所以赋值语句<code>workday = mon;</code>相当于<code>workday = 1</code>。可以将枚举常量当作整数输出：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>, workday);</span><br></pre></td></tr></table></figure>
<p>输出的是1。依此类推，枚举常量还可以用作条件分支中整数之间的比较。<br>虽然枚举元素的值不能单独指定数值，但是可以在定义枚举类型的时候显示指定：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Weekday&#123;sun=<span class="number">7</span>, mon=<span class="number">1</span>, tue, wed =<span class="number">3</span>, thu, fri, sat&#125;workday, weekend</span><br></pre></td></tr></table></figure></p>
<h2 id="typedef的使用方法"><a href="#typedef的使用方法" class="headerlink" title="typedef的使用方法"></a>typedef的使用方法</h2><p>7、<br>个人认为typedef主要用于增强程序可读性的场合，博主参与算法竞赛期间没有用过，但写游戏这种设计大规模编程工作的任务中少不了它。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Integer;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">float</span> Real;</span><br><span class="line"></span><br><span class="line"><span class="comment">//上面两行执行后，下面两行等价</span></span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line">Integer i;</span><br><span class="line"><span class="comment">//下面两行也等价</span></span><br><span class="line"><span class="keyword">float</span> f;</span><br><span class="line">Real f;</span><br></pre></td></tr></table></figure>
<p>代码讲得很清楚了，typedef就是给类型名重新起个名字使用，达到自己想要的可读性目标。<br>也可以用这个来简化复杂类型表示方法：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> * (* (*)[<span class="number">10</span>])(<span class="keyword">void</span>)		<span class="comment">//指向包含10个元素的一维数组的指针，数组元素的类型为函数指针，</span></span><br><span class="line">							<span class="comment">//函数没有参数，函数的返回值是int指针</span></span><br></pre></td></tr></table></figure>
<p>是不是巨<del>鸡儿</del>（文明你我他）麻烦？这时候用typedef来简化十分方便，不过谭浩强系列书上没给这种的具体表示，估计实际中用不到，等我们能用到时再说，咱不深究这个问题。</p>
<p>再看一个例子，用typedef简化结构体（这可能是typedef最常用的地方，特别是在《数据结构》这门课中）：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> month;</span><br><span class="line">	<span class="keyword">int</span> day;</span><br><span class="line">	<span class="keyword">int</span> year;</span><br><span class="line">&#125;Date;</span><br><span class="line"></span><br><span class="line">Date birthday;		<span class="comment">//定义结构体变量，不要写成struct Date birthday</span></span><br><span class="line">Date *p;			<span class="comment">//定义结构体指针变量p，指向此结构体类型数据</span></span><br></pre></td></tr></table></figure>
<p>简化数组：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Num[<span class="number">100</span>];</span><br><span class="line">Num a;	<span class="comment">//定义整型数组a，a中有100个元素</span></span><br></pre></td></tr></table></figure>
<p>简化指针：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type <span class="keyword">char</span> * String;</span><br><span class="line">String p, s[<span class="number">10</span>];		<span class="comment">//p为字符指针变量，s为字符指针数组</span></span><br></pre></td></tr></table></figure>
<p>简化数组指针：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">( * Pointer)</span><span class="params">()</span></span>;		<span class="comment">//Pointer是指向函数的指针类型，函数返回整型值</span></span><br><span class="line">Pointer p;			<span class="comment">//p为Pointer类型的指针变量</span></span><br></pre></td></tr></table></figure>
<h3 id="typedef记忆技巧："><a href="#typedef记忆技巧：" class="headerlink" title="typedef记忆技巧："></a>typedef记忆技巧：</h3><p>如果去掉typedef，剩下的部分应当是一个完整的变量或别的什么的定义：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Num[<span class="number">100</span>];		<span class="comment">//Num是指定的名称</span></span><br><span class="line"><span class="comment">//去掉typedef后：</span></span><br><span class="line"><span class="keyword">int</span> Num[<span class="number">100</span>];		<span class="comment">//Num是被定义的变量</span></span><br></pre></td></tr></table></figure>
<h1 id="对文件的操作"><a href="#对文件的操作" class="headerlink" title="对文件的操作"></a>对文件的操作</h1><p>这部分就不总结了，用的不多，用时再查。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/C/" rel="tag"># C</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/02/15/C语言——基础查漏补缺（一）/" rel="next" title="C语言——基础查漏补缺（一）">
                <i class="fa fa-chevron-left"></i> C语言——基础查漏补缺（一）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Umbrellalalalala</p>
              <p class="site-description motion-element" itemprop="description">分享Umbrellalalalala的学术文章</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#指针"><span class="nav-number">1.</span> <span class="nav-text">指针</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#指针基本概念"><span class="nav-number">1.1.</span> <span class="nav-text">指针基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指针和数组"><span class="nav-number">1.2.</span> <span class="nav-text">指针和数组</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#指向二维数组的指针变量的两种方式："><span class="nav-number">1.2.0.0.1.</span> <span class="nav-text">指向二维数组的指针变量的两种方式：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#小结"><span class="nav-number">1.2.0.0.2.</span> <span class="nav-text">小结</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指针和字符串"><span class="nav-number">1.3.</span> <span class="nav-text">指针和字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指针和函数"><span class="nav-number">1.4.</span> <span class="nav-text">指针和函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指针数组和多重指针"><span class="nav-number">1.5.</span> <span class="nav-text">指针数组和多重指针</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#用户自建数据类型"><span class="nav-number">2.</span> <span class="nav-text">用户自建数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#结构体及其使用"><span class="nav-number">2.1.</span> <span class="nav-text">结构体及其使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#从来没用过的共用体"><span class="nav-number">2.2.</span> <span class="nav-text">从来没用过的共用体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#枚举类型"><span class="nav-number">2.3.</span> <span class="nav-text">枚举类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#typedef的使用方法"><span class="nav-number">2.4.</span> <span class="nav-text">typedef的使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#typedef记忆技巧："><span class="nav-number">2.4.1.</span> <span class="nav-text">typedef记忆技巧：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#对文件的操作"><span class="nav-number">3.</span> <span class="nav-text">对文件的操作</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Umbrellalalalala</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
